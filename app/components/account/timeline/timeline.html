<modal-dialog image-url="modalImageUrl" show='modalShown' ><!--width='850px' height='60%'-->                            
</modal-dialog>
<div style="overflow-x: hidden">
<div class="text-center trip-titlebar" ng-style="{'background-image':'url(' +getCroppedTripImageUrl(trip.main_image.image_url,'upload/c_fill,h_400,w_960/')+ ')'}"></div>
<div class="timeline-tripname text-center">
    <span>{{trip.title}}</span>
</div>   
<div class="trip-intro text-center"><img src="../css/images/Comma left.png" alt="comma1">
    <p>{{trip.introduction}}</p>
    <img src="../css/images/Comma right.png" alt="comma2">
    <div class="by-user">
    <a ng-href="#/account/profile/{{userObj.id}}">
    <img class="img-circle" ng-src="{{userObj.facebook_profile.picture.data.url}}" alt="">
    <p>{{userObj.facebook_profile.name}}</p>
    </a>
    </div>
    <div class="col-md-3">
    <a ng-show="isMyProfile"  ng-href="/#/account/editTrip/{{trip.id}}" class="btn btn-primary btn-lg round" style="text-transform:none!important;">Edit your trip</a>                
    </div>
    <ul class="rrssb-buttons">
      <!--<li class="rrssb-googleplus small">
          <a ng-href="https://plus.google.com/share?url=Check%20out%20how%20ridiculously%20responsive%20these%20social%20buttons%20are%20{{pageUrl}}" onclick="window.open(this.href, 'mywin','left=50,top=50,width=600,height=350,toolbar=0'); return false;"  class="popup"><span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M21 8.29h-1.95v2.6h-2.6v1.82h2.6v2.6H21v-2.6h2.6v-1.885H21V8.29zM7.614 10.306v2.925h3.9c-.26 1.69-1.755 2.925-3.9 2.925-2.34 0-4.29-2.016-4.29-4.354s1.885-4.353 4.29-4.353c1.104 0 2.014.326 2.794 1.105l2.08-2.08c-1.3-1.17-2.924-1.883-4.874-1.883C3.65 4.586.4 7.835.4 11.8s3.25 7.212 7.214 7.212c4.224 0 6.953-2.988 6.953-7.082 0-.52-.065-1.104-.13-1.624H7.614z"></path>
                </svg></span><span class="rrssb-text">google+</span>
          </a>
      </li>-->
        <li style="cursor: pointer" class="rrssb-facebook small">
        <a ng-click="shareOnFacebook()" class="popup">
          <span class="rrssb-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z"/></svg></span>
          <span class="rrssb-text">facebook</span>
        </a>
      </li>
      <li class="rrssb-twitter small">
        <a ng-href="https://twitter.com/intent/tweet?text={{trip.title | escape}}%20%7C%20{{pageUrl | escape}}" onclick="window.open(this.href, 'mywin','left=50,top=50,width=600,height=350,toolbar=0'); return false;"
        class="popup">
          <span class="rrssb-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62a15.093 15.093 0 0 1-8.86-2.32c2.702.18 5.375-.648 7.507-2.32a5.417 5.417 0 0 1-4.49-3.64c.802.13 1.62.077 2.4-.154a5.416 5.416 0 0 1-4.412-5.11 5.43 5.43 0 0 0 2.168.387A5.416 5.416 0 0 1 2.89 4.498a15.09 15.09 0 0 0 10.913 5.573 5.185 5.185 0 0 1 3.434-6.48 5.18 5.18 0 0 1 5.546 1.682 9.076 9.076 0 0 0 3.33-1.317 5.038 5.038 0 0 1-2.4 2.942 9.068 9.068 0 0 0 3.02-.85 5.05 5.05 0 0 1-2.48 2.71z"/></svg></span>
          <span class="rrssb-text">twitter</span>
        </a>
      </li>
      <li class="rrssb-pinterest small" >
          <a ng-href="http://pinterest.com/pin/create/button/?url={{pageUrl | escape}}&amp;media={{trip.main_image.image_url}}&amp;description={{trip.title | escape}}%20{{pageUrl | escape}}" onclick="window.open(this.href, 'mywin','left=50,top=50,width=600,height=350,toolbar=0'); return false;"><span class="rrssb-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28">
                <path d="M14.02 1.57c-7.06 0-12.784 5.723-12.784 12.785S6.96 27.14 14.02 27.14c7.062 0 12.786-5.725 12.786-12.785 0-7.06-5.724-12.785-12.785-12.785zm1.24 17.085c-1.16-.09-1.648-.666-2.558-1.22-.5 2.627-1.113 5.146-2.925 6.46-.56-3.972.822-6.952 1.462-10.117-1.094-1.84.13-5.545 2.437-4.632 2.837 1.123-2.458 6.842 1.1 7.557 3.71.744 5.226-6.44 2.924-8.775-3.324-3.374-9.677-.077-8.896 4.754.19 1.178 1.408 1.538.49 3.168-2.13-.472-2.764-2.15-2.683-4.388.132-3.662 3.292-6.227 6.46-6.582 4.008-.448 7.772 1.474 8.29 5.24.58 4.254-1.815 8.864-6.1 8.532v.003z"></path>
              </svg></span><span class="rrssb-text">pinterest</span>
          </a>
        </li>
        <li class="rrssb-email small">
	        <a href="mailto:?subject={{trip.title | escape}}&amp;body={{pageUrl | escape}}%0A{{trip.introduction | escape}}"><span class="rrssb-icon">
		        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z"></path>
		        </svg>
		        </span>
		    <span class="rrssb-text">email</span>
            </a>
        </li>
    </ul>
</div>
<div class="timeline-thirdheader text-center">
    <div class="container">
        <div class="row"> 
        <div class="col-md-2 col-sm-12 col-xs-12 col-md-offset-1">
<div class="share-button-timeline">
<span>Share</span>
</div>
</div>                       
            <div class="col-md-6 Itinerary text-center col-xs-12 col-sm-12">
                <div class="row">
                    <div ng-class="{'Itinerary-places-photos-button-active': tripTabIndex == 0}" class="col-md-4 col-xs-4 col-sm-4 Itinerary-places-photos-button">
                        <a href="" ng-click="updateTripTabPos(0)"><i class="fa fa-map-o">&nbsp; </i><span style="margin-bottom:0px!important;">Itinerary</span></a>
                    </div>
                    <div ng-class="{'Itinerary-places-photos-button-active': tripTabIndex == 1}" class="col-md-4 col-xs-4 col-sm-4 Itinerary-places-photos-button" ng-click="updateTripTabPos(1)">
                        <a href="" ng-click="updateTripTabPos(1)"><i class="fa fa-map-marker"> &nbsp;</i><span style="margin-bottom:0px!important;">Places</span></a>
                    </div>
                    <div ng-class="{'Itinerary-places-photos-button-active': tripTabIndex == 2}" class="col-md-4 col-xs-4 col-sm-3 Itinerary-places-photos-button">
                        <a href="" ng-click="updateTripTabPos(2)"><i class="fa fa-picture-o">&nbsp;</i><span style="margin-bottom:0px!important;">Photos</span></a>
                    </div>
                </div>
            </div>
            <div class="col-md-2 col-sm-12 col-xs-12">                
                    <!--<div class="col-md-3 col-xs-4 col-sm-4 text-center"><a href="" ng-click="scrollToCommentSection()"><i class="fa fa-comments"><sup><span class="fb-comments-count" data-href="{{pageUrl}}"></span></sup></i></a></div>
                    <div class="col-md-3 col-xs-4 col-sm-4 text-center"><a href=""><i class="fa fa-share-alt"><sup></sup></i></a></div>-->
                    
                    <!--<div class="fb-share-button" data-href="{{pageUrl}}" data-layout="icon"></div>-->
                    <div style="cursor: pointer" ng-class="{likeDisabled: isLikeDisabled}" class="timeline-like-button" ng-click="tripLikeUnlike();isLikeDisabled = !isLikeDisabled">
                        <em ng-class="{'fa fa-heart': likeId != undefined, 'fa fa-heart-o': likeId == undefined}" class="fa fa-heart">&nbsp; </em><span>like &nbsp; </span><span class="likes-quantity">{{trip.total_likes}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div ng-show="tripTabIndex == 0" class="col-md-9 col-sm-12 col-xs-12" >
            <div class="content">
                <!--<div class="portfolio-item no-line group first">   
                    <div class="trip-intro"><img src="../css/images/Comma left.png" alt="comma1">
                        <p>{{trip.introduction}}</p>
                        <img src="../css/images/Comma right.png" style="float:right;" alt="comma2">
                        <a ng-href="#/account/profile/{{userObj.id}}">
                            <div class="by-user">
                                <img ng-src="{{userObj.facebook_profile.picture.data.url}}" alt="profile" class="round">
                                <span>{{userObj.facebook_profile.name}}</span>
                            </div>
                        </a>    
                    </div>
                    <div class="portfolio-image">
                        <img ng-show="trip.main_image" ng-src="{{getCroppedTripImageUrl(trip.main_image.image_url,'upload/c_fill,h_400,w_960/')}}" class="fullwidth" alt="" style="display: block;">
                    </div>
                </div>-->
                <div class="portfolio-item group" ng-repeat="place in trip.visited_places track by $index">
                    <div class="portfolio-info">
                       <div class="date"><strong>{{place.location}}</strong> <br>{{place.date | date:"dd MMMM yyyy" }}</div>
                        <div class="description">
                            {{place.note}}
                        </div>                        
                    </div>
                    <div class="portfolio-image">
                    <uib-carousel interval="" no-wrap="false">
                      <uib-slide class="select-pointer" ng-click="toggleModal(getCroppedTripImageUrl(image.image_url,'upload/c_fill,h_0.8,w_0.8/'))" ng-repeat="image in place.images track by $index" active="slide.active" index="$index"><!--getCroppedTripImageUrl(image.image_url,'upload/c_fill,h_562,w_850/')-->
                        <img ng-src="{{getCroppedTripImageUrl(image.image_url,'upload/c_fill,h_500,w_960/')}}" style="margin:auto;">
                      </uib-slide>
                    </uib-carousel>
                      <!--<div class="container image-gallery-slider">
                        <img ng-repeat="image in place.images track by $index" class="image-gallery-slide" ng-swipe-right="showPrev(place.images)" ng-swipe-left="showNext(place.images)" ng-show="isActive($index)" ng-src="{{getCroppedTripImageUrl(image.image_url,'upload/c_fill,h_500,w_960/')}}" />
                        <a class="image-gallery-arrow prev" href="" ng-click="showPrev(place.images)"> Prev </a>
                        <a class="image-gallery-arrow next" href="" ng-click="showNext(place.images)"> Next </a>
                        <ul class="image-gallery-nav">
                            <li ng-repeat="image in place.images track by $index" ng-class="{'active':isActive($index)}">
                                <img ng-src="{{getCroppedTripImageUrl(image.image_url,'upload/c_fill,h_120,w_120/')}}" alt="{{}}" title="{{}}" ng-click="showPhoto($index);" />
                            </li>
                        </ul>
                    </div>-->                                                                   
                    </div>
                </div>
                <div class="text-center col-xs-12 timelineend">
                    <!--<p class="thatsall col-md-offset-6 col-sm-offset-6 col-xs-offset-3"> That's all Folks!</p><br>-->
                    <div class="credits col-md-offset-3 col-sm-offset-4">
                        <a ng-href="#/account/profile/{{userObj.id}}">
                            <img ng-src="{{userObj.facebook_profile.picture.data.url}}" class="img-circle">
                            <p>{{userObj.facebook_profile.name}}</p>
                        </a>
                    </div>
                    <div class="timeline-tags col-md-offset-3">
                        <span id="tags">Tags:</span><span ng-repeat="tag in trip.tags track by $index"><a ng-href="#/feed/{{tag}}">{{tag}}</a></span></div>
                </div>               
            </div>
        </div>
        <div id="places" ng-show="tripTabIndex == 1">            
            <div class="col-md-9 col-sm-12 col-xs-12">
                <div class="content">
                <ui-gmap-google-map center='map.center' zoom='map.zoom' options="options">
                    <ui-gmap-polyline ng-repeat="p in polylines" path="p.path" stroke="p.stroke" visible='p.visible'
                          geodesic='p.geodesic' fit="false" editable="p.editable" draggable="p.draggable" icons='p.icons'>
                    </ui-gmap-polyline>            
                <ui-gmap-markers models="allMarkers" coords="'self'" icon="'icon'"  options="marker.options" click="onClick()" events="marker.events">
                </ui-gmap-markers>
                </ui-gmap-google-map>
                </div>
            </div>
        </div>
        <div id="photos" ng-show="tripTabIndex == 2" class="col-md-9">
            <div class="content">
                <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                <a ng-click="toggleModal(getCroppedTripImageUrl(trip.main_image.image_url,'upload/c_fill,h_562,w_850/'))" class="thumbnail">
                    <img class="img-responsive" ng-src="{{getCroppedTripImageUrl(trip.main_image.image_url,'upload/c_fill,h_400,w_500/')}}" alt="">
                </a>
                </div>
                <div class="col-lg-3 col-md-4 col-xs-6 thumb" ng-repeat="placeImage in timelineImages track by $index">
                <a ng-click="toggleModal(getCroppedTripImageUrl(placeImage.image_url,'upload/c_fill,h_562,w_850/'))" class="thumbnail">
                    <img class="img-responsive" ng-src="{{getCroppedTripImageUrl(placeImage.image_url,'upload/c_fill,h_400,w_500/')}}" alt="">
                </a>
            </div>
            </div>
        </div>        
        <div class="col-md-3 col-sm-12 col-xs-12">
            <div class="row">
                <div class="stay-connected col-lg offset 4 col-md-offset-2 col-xs-12 col-sm-offset-5">
                    <span>Stay Connected</span>
                </div>
            </div>
        <div class="col-md-12 col-sm-3 col-xs-6" ng-repeat="trip in relatedTrips | filter:query">
        <div class="thumbnail">
            <a ng-href="#/account/timeline/{{trip.id}}">
              <img ng-src="{{trip.cropped_image_url}}" alt="thumbnail1" >
            </a>
          <div class="caption">
            <a ng-href="#/account/timeline/{{trip.id}}">
                <span class="pull-left trip_name">{{trip.title}}</span>
            </a>
            <span class="pull-right trip_date">{{trip.visited_places[0].date | date:"dd/MM/yyyy"}}</span>
            <br>
            <span class="pull-left"><a ng-href="#/account/profile/{{trip.user.id}}"><img ng-src="{{trip.user.facebook_profile.picture.data.url}}" alt="profile_pic" class="avatar img-circle"></a></span>
            <span class="user_name_thumbnail"><a ng-href="#/account/profile/{{trip.user.id}}">{{trip.username}}</a></span>
            <span class="pull-right stats_thumbnail">{{trip.total_likes}}</span>
            <span class="pull-right"><em class="fa fa-heart Like_icon_thumbnail"></em></span>
        
            <!--<span class="pull-right stats_thumbnail">19</span>-->
            <!--<span class="pull-right"><em class="fa fa-comments Like_icon_thumbnail"></em></span>-->        
           </div>
            </div>
            </div>
     </div>   
    </div>
</div>
<div class="container text-center">
<div class="comments-wrap" id="comments">
	<div class="comments container">
        <div id="fb-comment-box" dynamic-fb-comment-box
            page-href="{{pageUrl}}"
            numposts="5"
            colorscheme="light">
        </div>    	
	</div>
</div>
</div>
</div>
<!--//-->
<!-- slider container -->
    <!--<div class="container image-gallery-slider">
        <img ng-repeat="photo in photos" class="image-gallery-slide" ng-swipe-right="showPrev()" ng-swipe-left="showNext()" ng-show="isActive($index)" ng-src="{{photo.src}}" />
        <a class="image-gallery-arrow prev" href="#" ng-click="showPrev()"></a>
        <a class="image-gallery-arrow next" href="#" ng-click="showNext()"></a>
        <ul class="image-gallery-nav">
            <li ng-repeat="photo in photos" ng-class="{'active':isActive($index)}">
                <img src="{{photo.src}}" alt="{{photo.desc}}" title="{{photo.desc}}" ng-click="showPhoto($index);" />
            </li>
        </ul>
    </div>-->
 <!--<flex-slider slide="image in prod.imagePaths track by $index" animation="slide" control-nav="thumbnails">
                <li data-thumb="{{image.thumbnail}}">
                    <img ng-src="{{image.custom}}">
                </li>
            </flex-slider>-->
<!--<div ap-fotorama="options" ng-model="items">-->
<script type="text/javascript">
    $('.moadalImage').ready(function () {
        console.log('loading');
    });
    $('.moadalImage').load(function () {
        console.log('loaded');
    });
</script>